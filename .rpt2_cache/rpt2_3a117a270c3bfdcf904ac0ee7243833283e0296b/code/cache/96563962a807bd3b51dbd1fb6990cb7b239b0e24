{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport JJMgr from \"../JJExport/Common/JJMgr\";\r\nexport default class OpenPacketsUI extends Laya.Scene {\r\n    constructor() {\r\n        super();\r\n        this.openNode = this['openNode'];\r\n        this.txNode = this['txNode'];\r\n        this.closeOpenNodeBtn = this['closeOpenNodeBtn'];\r\n        this.openBtn = this['openBtn'];\r\n        this.tips = this['tips'];\r\n        this.cashNode = this['cashNode'];\r\n        this.coinNode = this['coinNode'];\r\n        this.closeTxBtn = this['closeTxBtn'];\r\n        this.cashNum = this['cashNum'];\r\n        this.getCashNum = this['getCashNum'];\r\n        this.tixianBtn = this['tixianBtn'];\r\n        this.coinNum = this['coinNum'];\r\n        this.getCoinBtn = this['getCoinBtn'];\r\n        this.isGetCash = true;\r\n        this.bounesNum = 0;\r\n    }\r\n    onOpened() {\r\n        this.openBtn.on(Laya.Event.CLICK, this, this.openBtnCB);\r\n        this.closeOpenNodeBtn.on(Laya.Event.CLICK, this, this.close);\r\n        this.closeTxBtn.on(Laya.Event.CLICK, this, this.close);\r\n        this.tixianBtn.on(Laya.Event.CLICK, this, this.txBtnCB);\r\n        this.getCoinBtn.on(Laya.Event.CLICK, this, this.getCoinBtnCB);\r\n    }\r\n    onClosed() {\r\n    }\r\n    visibleOpenNode(vivible) {\r\n        this.openNode.visible = vivible;\r\n    }\r\n    visibleTXNode(vivible) {\r\n        this.txNode.visible = vivible;\r\n    }\r\n    openBtnCB() {\r\n        this.visibleOpenNode(false);\r\n        this.visibleTXNode(true);\r\n        let packetData = PlayerDataMgr.getPacketData();\r\n        let videoCount = packetData.videoCount;\r\n        let maxCash = packetData.curStateCash;\r\n        if (videoCount < 3) {\r\n            this.isGetCash = true;\r\n        }\r\n        else {\r\n            let cashPer = JJMgr.instance.dataConfig.front_luckymoney_probability;\r\n            let randNum = Math.random() * 100;\r\n            this.isGetCash = cashPer < randNum;\r\n        }\r\n        if (this.isGetCash) {\r\n            let b = 0;\r\n            switch (videoCount) {\r\n                case 0:\r\n                    b = Math.random() * 0.1 + 0.4;\r\n                    b.toFixed(2);\r\n                    break;\r\n                case 1:\r\n                    b = Math.random() * 0.19 + 0.2;\r\n                    b.toFixed(2);\r\n                    break;\r\n                case 2:\r\n                    b = Math.random() * 0.19 + 0.2;\r\n                    b.toFixed(2);\r\n                    break;\r\n                case 3:\r\n                    b = Math.random() * 0.05 + 0.1;\r\n                    b.toFixed(2);\r\n                    break;\r\n            }\r\n            this.bounesNum = b;\r\n        }\r\n        else {\r\n            this.bounesNum = Math.floor(Math.random() * 200 + 100);\r\n        }\r\n    }\r\n    txBtnCB() {\r\n        this.close();\r\n        Laya.Scene.open('MyScenes/TakeCashUI.scene');\r\n    }\r\n    getCoinBtnCB() {\r\n    }\r\n}\r\n",
  "references": [
    "E:/GitProjects/DrawWeaponQQ/src/Libs/PlayerDataMgr.ts",
    "E:/GitProjects/DrawWeaponQQ/src/Libs/WxApi.ts",
    "E:/GitProjects/DrawWeaponQQ/src/JJExport/Common/JJMgr.ts"
  ]
}
